<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Freeman&family=Source+Sans+Pro:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/home.css"> <!-- Link to the external CSS file -->
</head>
<body>
    
<div class="main-container">
    <div id="header-placeholder"></div>
    
    <div class="intro-section">
        <div class="content-container">
          <div class="title1">
            PRIMUL PAS CĂTRE VIITORUL TĂU!
          </div>
          <div class="description1">
            Transformă-ți visurile în realitate alături de noi! Suntem aici să-ți ghidăm fiecare pas în alegerea facultății care te inspiră și te reprezintă. Descoperă-ți pasiunile, explorează opțiunile și lasă-te îndrumat de experți dedicați care îți vor arăta toate posibilitățile. Viitorul tău începe acum—fă primul pas spre cariera la care visezi!
          </div>
          <div class="cta-button">
            <span class="descoperă-text">Descoperă</span>
          </div>
        </div>
        <img src="images/home-image.avif" alt="Fundal" class="background-image">
      </div>

      <div class="home-message">
        <h1 class="title">Alege-ți viitorul educațional cu încredere!</h1>
        <p class="description">
            Descoperă universitățile din întreaga lume, compară programele de studii și găsește opțiunea care ți se potrivește cel mai bine. Fie că ești la început de drum sau îți continui studiile, noi îți oferim informațiile de care ai nevoie pentru a face alegerea corectă.
        </p>
    </div>    
  
 <!-- Galerie imagini -->
 <div class="image-gallery">
    <div class="image-item">
        <img src="images/home-universitate.png" alt="image 1"/>
        <div class="overlay">
            <div class="overlay-background"></div>
            <a href="facultati.html" class="overlay-link facultati">Facultăți</a>
        </div>
    </div>
    <div class="image-item">
        <img src="images/home-studii.png" alt="image 2" class="image-opacity"/>
        <div class="overlay">
            <div class="overlay-background"></div>
            <a href="studii.html" class="overlay-link studii">Studii</a>
        </div>
    </div>
    <div class="image-item">
        <img src="images/home-ghid.jpg" alt="image 3"/>
        <div class="overlay">
            <div class="overlay-background"></div>
            <a href="ghidul_studentului.html" class="overlay-link ghid-student">Ghid student</a>
        </div>
    </div>
</div>

<!-- News Section -->
<section class="news-section">
    <div class="news-banner">
      <div class="text-content">
        <h3>UNInews – Fii la curent cu tot ce contează în educație</h3>
        <p>Află primul despre schimbări în sistemul educațional, tendințe moderne în predare și oportunități noi pentru dezvoltare. Rămâi informat, implică-te și lasă-te inspirat de educație!</p>
        <button>Citeste</button>
      </div>
      <div class="image-content">
        <img src="images/news.png" alt="Banner Image">
      </div>
    </div>
  </section>


  <div class="quiz-section">
    <div class="quiz-content">
        <!-- Înlocuim h2 cu o imagine -->
        <img src="images/quizText.png" alt="Quiz Title" class="quiz-title">
        <p>Ești gata să afli unde te duce curiozitatea? Completează formularul nostru interactiv și lasă-ne să-ți ghicim domeniul ideal!</p>
        <button>Vezi quiz-ul</button>
    </div>
    <div class="quiz-icon">
        <img src="images/quizImage.png" alt="Quiz Icon">
    </div>
</div>

<!-- Newsletter Section -->
<section class="newsletter-section">
  <h3>Rămâi la curent cu noutățile din educație!</h3>
  <form action="#">
      <input type="email" placeholder="email@example.com" required>
      <button type="submit">Abonare</button>
  </form>
</section>




</div>
<div id="footer-placeholder"></div>
</div>

<script>
window.onload = function() {
    // Load header and footer placeholders
    fetch('activity_bar.html')
        .then(response => response.text())
        .then(data => {
            // Insert header HTML into the placeholder
            document.getElementById('header-placeholder').innerHTML = data;

            // Run user status check AFTER the header is loaded
            checkUserStatus(); 
            attachEventListeners(); // Attach event listeners for sign-in and logout
        })
        .catch(error => console.error('Error loading header:', error));

    fetch('footer.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('footer-placeholder').innerHTML = data;
        })
        .catch(error => console.error('Error loading footer:', error));
};

// Function to check the user's login status and update UI accordingly
const checkUserStatus = () => {
    console.log("Checking user status...");
    fetch('/user/status', {
        method: 'GET',
        credentials: 'include' // Include cookies for session
    })
    .then(response => response.json())
    .then(data => {
        console.log("User status response:", data);

        const signInButton = document.getElementById('sign-in-btn');
        const logoutButton = document.getElementById('logout-btn');
        const profileButton = document.querySelector('.profile-button');

        if (data.loggedIn) {
            console.log("User is logged in");

            // Hide "Sign In" button
            if (signInButton) {
                signInButton.style.display = 'none';
            }

            // Show "Log Out" button
            if (logoutButton) {
                logoutButton.style.display = 'block';
            }

            // Update Profile button to display username
            if (profileButton) {
                profileButton.textContent = `Hello, ${data.username}`;
                profileButton.style.display = 'inline-block'; // Ensure the profile button is visible
                console.log(`Profile button updated with username: ${data.username}`);
            }
        } else {
            console.log("User is not logged in");

            // Show "Sign In" button
            if (signInButton) {
                signInButton.style.display = 'block';
            }

            // Hide "Log Out" button
            if (logoutButton) {
                logoutButton.style.display = 'none';
            }

            // Hide Profile button
            if (profileButton) {
                profileButton.textContent = 'Profil';
                profileButton.style.display = 'block'; // Keep it visible but with default text
            }
        }
    })
    .catch(error => {
        console.error('Error fetching user status:', error);

        // Fallback to make sure elements are appropriately displayed in case of an error
        const signInButton = document.getElementById('sign-in-btn');
        const logoutButton = document.getElementById('logout-btn');
        const profileButton = document.querySelector('.profile-button');

        if (signInButton) signInButton.style.display = 'block';
        if (logoutButton) logoutButton.style.display = 'none';
        if (profileButton) profileButton.style.display = 'block';
    });
};

// Function to attach necessary event listeners to buttons
const attachEventListeners = () => {
    // Attach listener for Sign In button
    const signInButton = document.getElementById('sign-in-btn');
    if (signInButton) {
        console.log('Sign In button found. Attaching click listener...');
        signInButton.addEventListener('click', () => {
            window.location.href = '/auth';
        });
    } else {
        console.error('Sign In button not found.');
    }

    // Attach listener for Logout button
    const logoutButton = document.getElementById('logout-btn');
    if (logoutButton) {
        console.log('Logout button found. Attaching click listener...');
        logoutButton.addEventListener('click', () => {
            console.log('Logout button clicked');
            fetch('/logout', {
                method: 'GET',
                credentials: 'include' // Include cookies for session
            })
            .then(response => {
                if (response.ok) {
                    console.log('User logged out successfully');
                    window.location.href = '/'; // Redirect to the home page after logout
                } else {
                    console.error('Failed to log out');
                }
            })
            .catch(error => console.error('Error during logout:', error));
        });
    } else {
        console.error('Logout button not found.');
    }
};



  </script>



</body>
</html>
